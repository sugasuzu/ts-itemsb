# X-T Scatter Plot Generator

ç™ºè¦‹ã•ã‚ŒãŸãƒ«ãƒ¼ãƒ«ã®ä¸Šä½3ã¤ã«ã¤ã„ã¦ã€X-Tæ•£å¸ƒå›³ã‚’å€‹åˆ¥ã«ä½œæˆã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚

## ğŸ“Š æ¦‚è¦

ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã€GNMinerã§ç™ºè¦‹ã•ã‚ŒãŸãƒ«ãƒ¼ãƒ«ã‚’å¯è¦–åŒ–ã—ã¾ã™ï¼š

- **ãƒ™ãƒ¼ã‚¹ãƒ¬ã‚¤ãƒ¤ãƒ¼**: å…¨ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆï¼ˆè–„ã„ç°è‰²ï¼‰
- **ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤**: å„ãƒ«ãƒ¼ãƒ«ã®ãƒãƒƒãƒãƒã‚¤ãƒ³ãƒˆï¼ˆèµ¤è‰²ã€å¼·èª¿è¡¨ç¤ºï¼‰

å„ãƒ«ãƒ¼ãƒ«ã”ã¨ã«å€‹åˆ¥ã®PNGç”»åƒã‚’ç”Ÿæˆã—ã¾ã™ï¼ˆ1é€šè²¨ã«ã¤ã3æšï¼‰ã€‚

## ğŸ¯ ãƒ«ãƒ¼ãƒ«ã‚¹ã‚³ã‚¢è¨ˆç®—å¼

```
ãƒ«ãƒ¼ãƒ«ã‚¹ã‚³ã‚¢ = support_rate / (Ïƒ_t+1 Ã— Ïƒ_t+2 Ã— Ïƒ_t+3)
```

- **support_rate**: ã‚µãƒãƒ¼ãƒˆç‡ï¼ˆãƒãƒƒãƒé »åº¦ï¼‰
- **Ïƒ_t+k**: æœªæ¥æ™‚ç‚¹t+kã®æ¨™æº–åå·®

ã‚¹ã‚³ã‚¢ãŒé«˜ã„ã»ã©ã€**é«˜é »åº¦**ã§**å®‰å®šã—ãŸäºˆæ¸¬**ãŒã§ãã‚‹ãƒ«ãƒ¼ãƒ«ã‚’æ„å‘³ã—ã¾ã™ã€‚

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. ç’°å¢ƒæº–å‚™

```bash
# ä»®æƒ³ç’°å¢ƒãŒã‚ã‚‹å ´åˆ
source .venv/bin/activate  # ã¾ãŸã¯ conda activate your_env

# ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt
```

### 2. ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ

#### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```bash
cd analysis/crypt
python plot_xt_scatter.py --symbol AAVE
```

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä»˜ãå®Ÿè¡Œ

```bash
python plot_xt_scatter.py \
    --symbol BTC \
    --top-n 5 \
    --output-dir my_output
```

### 3. å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«

å®Ÿè¡Œå¾Œã€ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ï¼š

```
analysis/crypt/output/
â”œâ”€â”€ AAVE_rule_001_scatter.png  # 1ä½ãƒ«ãƒ¼ãƒ«ã®æ•£å¸ƒå›³
â”œâ”€â”€ AAVE_rule_002_scatter.png  # 2ä½ãƒ«ãƒ¼ãƒ«ã®æ•£å¸ƒå›³
â””â”€â”€ AAVE_rule_003_scatter.png  # 3ä½ãƒ«ãƒ¼ãƒ«ã®æ•£å¸ƒå›³
```

## ğŸ“‹ ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | çŸ­ç¸®å½¢ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|-----------|--------|-----------|------|
| `--symbol` | `-s` | **å¿…é ˆ** | éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹: AAVE, BTC, ETHï¼‰ |
| `--top-n` | `-n` | `3` | å¯è¦–åŒ–ã™ã‚‹ãƒ«ãƒ¼ãƒ«æ•° |
| `--output-dir` | `-o` | `output` | å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª |

## ğŸ“Š æ•£å¸ƒå›³ã®èª­ã¿æ–¹

### ã‚°ãƒ©ãƒ•ã®æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AAVE: X-T Scatter Plot - Rule 1        â”‚
â”‚  Score=10.17 | Support=0.0011 | ...     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â–ª å…¨ãƒ‡ãƒ¼ã‚¿ (ç°è‰²ã€è–„ã„)                 â”‚
â”‚                                         â”‚
â”‚  â— ãƒ«ãƒ¼ãƒ«ãƒãƒƒãƒ (èµ¤è‰²ã€å¤§ãã„)           â”‚
â”‚                                         â”‚
â”‚           [æ™‚é–“è»¸] â†’                    â”‚
â”‚    â†‘                                    â”‚
â”‚    X                                    â”‚
â”‚    å€¤                                    â”‚
â”‚    (%)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ³¨ç›®ãƒã‚¤ãƒ³ãƒˆ

1. **ãƒãƒƒãƒãƒã‚¤ãƒ³ãƒˆã®æ™‚é–“çš„åˆ†å¸ƒ**
   - ç‰¹å®šã®æœŸé–“ã«é›†ä¸­ã—ã¦ã„ã‚‹ï¼Ÿ
   - å‡ç­‰ã«åˆ†æ•£ã—ã¦ã„ã‚‹ï¼Ÿ

2. **Xå€¤ã®ç¯„å›²**
   - ãƒ—ãƒ©ã‚¹ï¼ˆä¸Šæ˜‡ï¼‰ãŒå¤šã„ï¼Ÿ
   - ãƒã‚¤ãƒŠã‚¹ï¼ˆä¸‹è½ï¼‰ãŒå¤šã„ï¼Ÿ

3. **å¤–ã‚Œå€¤ã®æœ‰ç„¡**
   - æ¥µç«¯ãªXå€¤ã‚’æŒã¤ãƒãƒƒãƒãŒã‚ã‚‹ã‹

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

```
analysis/crypt/
â”œâ”€â”€ plot_xt_scatter.py      # ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ requirements.txt         # ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”œâ”€â”€ README.md               # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ output/                 # ç”Ÿæˆã•ã‚Œã‚‹ç”»åƒï¼ˆè‡ªå‹•ä½œæˆï¼‰
    â”œâ”€â”€ AAVE_rule_001_scatter.png
    â”œâ”€â”€ AAVE_rule_002_scatter.png
    â””â”€â”€ AAVE_rule_003_scatter.png
```

## ğŸ” å…¥åŠ›ãƒ‡ãƒ¼ã‚¿

ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¾ã™ï¼š

### 1. ãƒ«ãƒ¼ãƒ«ãƒ—ãƒ¼ãƒ« (`crypto_data/output/{SYMBOL}/pool/zrp01a.txt`)

ç™ºè¦‹ã•ã‚ŒãŸå…¨ãƒ«ãƒ¼ãƒ«ã®ãƒªã‚¹ãƒˆï¼ˆã‚¿ãƒ–åŒºåˆ‡ã‚Šï¼‰ï¼š
- å±æ€§æƒ…å ±
- çµ±è¨ˆå€¤ï¼ˆmean, sigmaï¼‰
- ã‚µãƒãƒ¼ãƒˆå€¤

### 2. æ¤œè¨¼ãƒ‡ãƒ¼ã‚¿ (`crypto_data/output/{SYMBOL}/verification/rule_*.csv`)

å„ãƒ«ãƒ¼ãƒ«ã®ãƒãƒƒãƒã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼ˆCSVå½¢å¼ï¼‰ï¼š
- RowIndex: å…ƒãƒ‡ãƒ¼ã‚¿ã®è¡Œç•ªå·
- Timestamp: ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
- X(t+1), X(t+2), X(t+3): æœªæ¥å€¤

### 3. å…ƒãƒ‡ãƒ¼ã‚¿ (`crypto_data/gnminer_individual/{SYMBOL}.txt`)

å…¨ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆï¼ˆCSVå½¢å¼ï¼‰ï¼š
- å±æ€§ã‚«ãƒ©ãƒ ï¼ˆUp/Stay/Downï¼‰
- X: ç¾åœ¨æ™‚ç‚¹ã®å¤‰åŒ–ç‡
- T: ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—

## âš ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼: "Pool file not found"

```bash
# ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
ls crypto_data/output/AAVE/pool/zrp01a.txt
```

â†’ è©²å½“éŠ˜æŸ„ã®ãƒ‡ãƒ¼ã‚¿ãŒç”Ÿæˆã•ã‚Œã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚å…ˆã«GNMinerã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

### ã‚¨ãƒ©ãƒ¼: "No valid matches"

ä¸€éƒ¨ã®ãƒ«ãƒ¼ãƒ«ã§ãƒãƒƒãƒãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ããªã„å ´åˆãŒã‚ã‚Šã¾ã™ãŒã€ã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã¾ã™ã€‚

### è­¦å‘Š: "RuntimeWarning: invalid value"

ã‚¼ãƒ­é™¤ç®—ãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ãŒã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆå†…ã§å‡¦ç†ã•ã‚Œã¦ã„ã¾ã™ï¼ˆã‚¹ã‚³ã‚¢=0ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ï¼‰ã€‚

## ğŸ“ˆ å¿œç”¨ä¾‹

### å…¨éŠ˜æŸ„ã‚’ä¸€æ‹¬å‡¦ç†

```bash
for symbol in AAVE BTC ETH BNB ADA; do
    python plot_xt_scatter.py --symbol $symbol
done
```

### ä¸Šä½5ãƒ«ãƒ¼ãƒ«ã‚’å¯è¦–åŒ–

```bash
python plot_xt_scatter.py --symbol BTC --top-n 5
```

## ğŸ› ï¸ æŠ€è¡“ä»•æ§˜

- **Python**: 3.8+
- **ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸**:
  - pandas >= 1.5.0
  - numpy >= 1.23.0
  - matplotlib >= 3.6.0
- **ç”»åƒè§£åƒåº¦**: 300 DPI
- **ç”»åƒã‚µã‚¤ã‚º**: 14Ã—8ã‚¤ãƒ³ãƒï¼ˆé«˜è§£åƒåº¦ï¼‰

## ğŸ“ ãƒ­ã‚°ä¾‹

```
============================================================
  X-T Scatter Plot Generator
============================================================
Symbol: AAVE
Top N Rules: 3
Output Directory: output
============================================================

[1/4] Loading rule pool...
  âœ“ Loaded 8443 rules
  âœ“ Selected top 3 rules

  Top Rules:
    Rule   1: Score= 10.1671 | Support=  2 | Rate=0.0011
    Rule   2: Score=  1.5562 | Support=  2 | Rate=0.0011
    Rule   3: Score=  1.5562 | Support=  2 | Rate=0.0011

[2/4] Loading all data...
  âœ“ Loaded 1855 data points

[3/4] Generating scatter plots...
  âœ“ Saved: output/AAVE_rule_001_scatter.png
  âœ“ Saved: output/AAVE_rule_002_scatter.png
  âœ“ Saved: output/AAVE_rule_003_scatter.png

[4/4] Complete!
  âœ“ Generated 3 scatter plots
  âœ“ Output directory: output
```

## ğŸ“§ ã‚µãƒãƒ¼ãƒˆ

å•é¡Œã‚„æ”¹å–„ææ¡ˆãŒã‚ã‚‹å ´åˆã¯ã€Issue ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
